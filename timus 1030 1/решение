#include <iostream>
#include <cstdlib>
#include <cstdio>
#include <cmath>
using namespace std;

const double r = 6875.0/2;
const double pi = std::acos(-1.0);

double dist(double d1, double l1, double d2, double l2)
{
    d1 *= pi/180;
    l1 *= pi/180;
    d2 *= pi/180;
    l2 *= pi/180;
    return r*acos(sin(d1)*sin(d2)+cos(d1)*cos(d2)*cos(l1-l2));
}

int main()
{
    double d,m,s,d1,d2,l1,l2,dis;
    char temp[4];
    scanf("Message #%*d. Received at %*d:%*d:%*d.%*[\n\r ]");
    scanf("Current ship's coordinates are%*[\n\r ]");
    
    scanf("%lf^%lf'%lf\" %cL%*[\n\r ]", &d, &m, &s, temp);
    d1 = (d + m/60 + s/3600)*(temp[0] == 'N' ? 1 : -1);
    
    scanf("and %lf^%lf'%lf\" %cL.%*[\n\r ]", &d, &m, &s, temp);
    l1 = (d + m/60 + s/3600)*(temp[1] == 'E' ? 1 : -1);
    
    scanf("An iceberg was noticed at%*[\n\r ]");
    
    scanf("%lf^%lf'%lf\" %cL%*[\n\r ]", &d, &m, &s, temp);
    d2 = (d + m/60 + s/3600)*(temp[2] == 'N' ? 1 : -1);
	
    scanf("%s",temp);
    scanf("and %lf^%lf'%lf\" %cL.%*[\n\r ]", &d, &m, &s, temp);
    l2 = (d + m/60 + s/3600)*(temp[3] == 'E' ? 1 : -1)*pi/180;
   
    dis = dist(d1,l1,d2,l2);
    printf("The distance to the iceberg: %.2lf miles.\n", d);
    if(d < 99.995)
        printf("DANGER!");
}
